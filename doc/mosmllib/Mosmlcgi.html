<HTML><HEAD><TITLE>Structure Mosmlcgi</TITLE></HEAD>
<BODY BGCOLOR="#fbf2e7">
<H1>Structure Mosmlcgi</H1>
<HR><TABLE WIDTH=100%><TR ALIGN = CENTER>
<TH><A HREF="idIndex.html">Identifier index</A>
<TH><A HREF="index.html">Structure index</A>
</TABLE><HR>
<PRE>
<A NAME="line1"></A>(* Mosmlcgi -- Support for writing CGI scripts in Moscow ML 
<A NAME="line2"></A>
<A NAME="line3"></A> (c) Jonas Barklund, Computing Science Dept., Uppsala University, 1996.
<A NAME="line4"></A>     Documentation and support for file upload added by Peter Sestoft.
<A NAME="line5"></A>     More CGI variables and cookies by Hans Molin, Uppsala Univ., 1999.
<A NAME="line6"></A>*)
<A NAME="line7"></A>
<A NAME="line8"></A>(* 1. Accessing the fields or parameters of a CGI call *)
<A NAME="line9"></A>
<A NAME="line10"></A>val <A NAME="line10"></A><A HREF="#cgi_fieldnames">cgi_fieldnames</A>    : string list
<A NAME="line11"></A>val <A NAME="line11"></A><A HREF="#cgi_field_strings">cgi_field_strings</A> : string -> string list;
<A NAME="line12"></A>val <A NAME="line12"></A><A HREF="#cgi_field_string">cgi_field_string</A>  : string -> string option;
<A NAME="line13"></A>val <A NAME="line13"></A><A HREF="#cgi_field_integer">cgi_field_integer</A> : string * int -> int;
<A NAME="line14"></A>
<A NAME="line15"></A>(* 2. Accessing parts in multipart/form-data; form-based file upload *)
<A NAME="line16"></A>
<A NAME="line17"></A>val <A NAME="line17"></A><A HREF="#cgi_partnames">cgi_partnames</A> : string list
<A NAME="line18"></A>
<A NAME="line19"></A>type part
<A NAME="line20"></A>val <A NAME="line20"></A><A HREF="#cgi_part">cgi_part</A>  : string -> part option
<A NAME="line21"></A>val <A NAME="line21"></A><A HREF="#cgi_parts">cgi_parts</A> : string -> part list
<A NAME="line22"></A>
<A NAME="line23"></A>val <A NAME="line23"></A><A HREF="#part_fieldnames">part_fieldnames</A>    : part -> string list
<A NAME="line24"></A>val <A NAME="line24"></A><A HREF="#part_type">part_type</A>          : part -> string option
<A NAME="line25"></A>val <A NAME="line25"></A><A HREF="#part_data">part_data</A>          : part -> string
<A NAME="line26"></A>val <A NAME="line26"></A><A HREF="#part_field_strings">part_field_strings</A> : part -> string -> string list
<A NAME="line27"></A>val <A NAME="line27"></A><A HREF="#part_field_string">part_field_string</A>  : part -> string -> string option
<A NAME="line28"></A>val <A NAME="line28"></A><A HREF="#part_field_integer">part_field_integer</A> : part -> string * int -> int
<A NAME="line29"></A>
<A NAME="line30"></A>(* 3. Administrative information *)
<A NAME="line31"></A>
<A NAME="line32"></A>val <A NAME="line32"></A><A HREF="#cgi_server_software">cgi_server_software</A>       : string option
<A NAME="line33"></A>val <A NAME="line33"></A><A HREF="#cgi_server_name">cgi_server_name</A>           : string option
<A NAME="line34"></A>val <A NAME="line34"></A><A HREF="#cgi_gateway_interface">cgi_gateway_interface</A>     : string option
<A NAME="line35"></A>val <A NAME="line35"></A><A HREF="#cgi_server_protocol">cgi_server_protocol</A>       : string option
<A NAME="line36"></A>val <A NAME="line36"></A><A HREF="#cgi_server_port">cgi_server_port</A>           : string option
<A NAME="line37"></A>val <A NAME="line37"></A><A HREF="#cgi_request_method">cgi_request_method</A>        : string option
<A NAME="line38"></A>val <A NAME="line38"></A><A HREF="#cgi_http_accept">cgi_http_accept</A>           : string option
<A NAME="line39"></A>val <A NAME="line39"></A><A HREF="#cgi_http_user_agent">cgi_http_user_agent</A>       : string option
<A NAME="line40"></A>val <A NAME="line40"></A><A HREF="#cgi_http_referer">cgi_http_referer</A>          : string option
<A NAME="line41"></A>val <A NAME="line41"></A><A HREF="#cgi_path_info">cgi_path_info</A>             : string option
<A NAME="line42"></A>val <A NAME="line42"></A><A HREF="#cgi_path_translated">cgi_path_translated</A>       : string option
<A NAME="line43"></A>val <A NAME="line43"></A><A HREF="#cgi_script_name">cgi_script_name</A>           : string option
<A NAME="line44"></A>val <A NAME="line44"></A><A HREF="#cgi_query_string">cgi_query_string</A>          : string option
<A NAME="line45"></A>val <A NAME="line45"></A><A HREF="#cgi_remote_host">cgi_remote_host</A>           : string option
<A NAME="line46"></A>val <A NAME="line46"></A><A HREF="#cgi_remote_addr">cgi_remote_addr</A>           : string option
<A NAME="line47"></A>val <A NAME="line47"></A><A HREF="#cgi_remote_user">cgi_remote_user</A>           : string option
<A NAME="line48"></A>val <A NAME="line48"></A><A HREF="#cgi_remote_ident">cgi_remote_ident</A>          : string option
<A NAME="line49"></A>val <A NAME="line49"></A><A HREF="#cgi_auth_type">cgi_auth_type</A>             : string option
<A NAME="line50"></A>val <A NAME="line50"></A><A HREF="#cgi_content_type">cgi_content_type</A>          : string option
<A NAME="line51"></A>val <A NAME="line51"></A><A HREF="#cgi_content_length">cgi_content_length</A>        : string option
<A NAME="line52"></A>val <A NAME="line52"></A><A HREF="#cgi_annotation_server">cgi_annotation_server</A>     : string option
<A NAME="line53"></A>
<A NAME="line54"></A>val <A NAME="line54"></A><A HREF="#cgi_http_cookie">cgi_http_cookie</A>           : string option
<A NAME="line55"></A>val <A NAME="line55"></A><A HREF="#cgi_http_forwarded">cgi_http_forwarded</A>        : string option
<A NAME="line56"></A>val <A NAME="line56"></A><A HREF="#cgi_http_host">cgi_http_host</A>             : string option
<A NAME="line57"></A>val <A NAME="line57"></A><A HREF="#cgi_http_proxy_connection">cgi_http_proxy_connection</A> : string option
<A NAME="line58"></A>val <A NAME="line58"></A><A HREF="#cgi_script_filename">cgi_script_filename</A>       : string option
<A NAME="line59"></A>val <A NAME="line59"></A><A HREF="#cgi_document_root">cgi_document_root</A>         : string option
<A NAME="line60"></A>val <A NAME="line60"></A><A HREF="#cgi_server_admin">cgi_server_admin</A>          : string option
<A NAME="line61"></A>val <A NAME="line61"></A><A HREF="#cgi_api_version">cgi_api_version</A>           : string option
<A NAME="line62"></A>val <A NAME="line62"></A><A HREF="#cgi_the_request">cgi_the_request</A>           : string option
<A NAME="line63"></A>val <A NAME="line63"></A><A HREF="#cgi_request_uri">cgi_request_uri</A>           : string option
<A NAME="line64"></A>val <A NAME="line64"></A><A HREF="#cgi_request_filename">cgi_request_filename</A>      : string option
<A NAME="line65"></A>val <A NAME="line65"></A><A HREF="#cgi_is_subreq">cgi_is_subreq</A>             : string option
<A NAME="line66"></A>
<A NAME="line67"></A>(* The Mosmlcgi library is for writing CGI programs in Moscow ML.  A
<A NAME="line68"></A>   CGI program may be installed on a WWW server and is invoked in
<A NAME="line69"></A>   response to HTTP requests sent to the server from a web browser,
<A NAME="line70"></A>   typically from an HTML FORM element.
<A NAME="line71"></A>
<A NAME="line72"></A>
<A NAME="line73"></A>   1. Obtaining field values sent from an ordinary HTML form
<A NAME="line74"></A>   ---------------------------------------------------------
<A NAME="line75"></A>
   [<A NAME="cgi_fieldnames"><B>cgi_fieldnames</B></A>] is a list of the names of fields present in the
   CGI call message.  If field name fnm is in cgi_fieldnames, then
   cgi_field_string fnm <> NONE.

   [<A NAME="cgi_field_strings"><B>cgi_field_strings</B></A> fnm] is a (possibly empty) list of the strings
   bound to field fnm.

   [<A NAME="cgi_field_string"><B>cgi_field_string</B></A> fnm] returns SOME(s) where s is a string bound to
   field name fnm, if any; otherwise NONE.  Equivalent to 
	case cgi_field_strings fnm of 
             []     => NONE 
           | s :: _ => SOME s

   [<A NAME="cgi_field_integer"><B>cgi_field_integer</B></A> (fnm, deflt)] attempts to parse an integer from
   field fnm.  Returns i if cgi_field_string(fnm) = SOME(s) and an
   integer i can be parsed from a prefix of s; otherwise returns deflt.


   2. Obtaining field values sent with ENCTYPE="multipart/form-data"  
   -----------------------------------------------------------------

   [<A NAME="cgi_partnames"><B>cgi_partnames</B></A>] is a list of the names of the parts of the
   multipart/form-data message.

   The type part is the abstract type of parts of a message.  Each part
   may have several fields.  In this implementation, the field of a
   part cannot be a another part itself.

   [<A NAME="cgi_parts"><B>cgi_parts</B></A> pnm] is a (possibly empty) list of the parts called pnm.

   [<A NAME="cgi_part"><B>cgi_part</B></A> pnm] is SOME(prt) where prt is a part called pnm, if any;
   otherwise NONE.  Equivalent to
	case cgi_parts pnm of 
             []       => NONE 
           | prt :: _ => SOME prt

   [<A NAME="part_fieldnames"><B>part_fieldnames</B></A> prt] is the list of field names in part pnm.

   [<A NAME="part_type"><B>part_type</B></A> prt] is SOME(typ) if the part prt contains a specification
   `Context-Type: typ'; otherwise NONE.

   [<A NAME="part_data"><B>part_data</B></A> prt] is the data contain in part prt; for instance, the
   contents of a file uploaded via form-based file upload.

   [<A NAME="part_field_strings"><B>part_field_strings</B></A> prt fnm] is a (possibly empty) list of the
   strings bound to field fnm in part prt.

   [<A NAME="part_field_string"><B>part_field_string</B></A> prt fnm] returns SOME(s) where s is a string
   bound to field name fnm in part prt, if any; otherwise NONE.
   Equivalent to 
	case part_field_strings prt fnm of 
	     []     => NONE 
	   | s :: _ => SOME s

   [<A NAME="part_field_integer"><B>part_field_integer</B></A> prt (fnm, deflt)] attempts to parse an integer
   from field fnm of part prt.  Returns i if part_field_string prt fnm
   = SOME(s) and an integer i can be parsed from a prefix of s;
   otherwise returns deflt.


   3. Administrative and server information
   ----------------------------------------

   Each of the following variables has the value SOME(s) if the
   corresponding CGI environment variable is bound to string s;
   otherwise NONE:

   [<A NAME="cgi_server_software"><B>cgi_server_software</B></A>] is the value of SERVER_SOFTWARE

   [<A NAME="cgi_server_name"><B>cgi_server_name</B></A>] is the value of SERVER_NAME

   [<A NAME="cgi_gateway_interface"><B>cgi_gateway_interface</B></A>] is the value of GATEWAY_INTERFACE

   [<A NAME="cgi_server_protocol"><B>cgi_server_protocol</B></A>] is the value of SERVER_PROTOCOL

   [<A NAME="cgi_server_port"><B>cgi_server_port</B></A>] is the value of SERVER_PORT

   [<A NAME="cgi_request_method"><B>cgi_request_method</B></A>] is the value of REQUEST_METHOD

   [<A NAME="cgi_http_accept"><B>cgi_http_accept</B></A>] is the value of HTTP_ACCEPT

   [<A NAME="cgi_http_user_agent"><B>cgi_http_user_agent</B></A>] is the value of HTTP_USER_AGENT

   [<A NAME="cgi_http_referer"><B>cgi_http_referer</B></A>] is the value of HTTP_REFERER

   [<A NAME="cgi_path_info"><B>cgi_path_info</B></A>] is the value of PATH_INFO

   [<A NAME="cgi_path_translated"><B>cgi_path_translated</B></A>] is the value of PATH_TRANSLATED

   [<A NAME="cgi_script_name"><B>cgi_script_name</B></A>] is the value of SCRIPT_NAME

   [<A NAME="cgi_query_string"><B>cgi_query_string</B></A>] is the value of QUERY_STRING

   [<A NAME="cgi_remote_host"><B>cgi_remote_host</B></A>] is the value of REMOTE_HOST

   [<A NAME="cgi_remote_addr"><B>cgi_remote_addr</B></A>] is the value of REMOTE_ADDR

   [<A NAME="cgi_remote_user"><B>cgi_remote_user</B></A>] is the value of REMOTE_USER

   [<A NAME="cgi_remote_ident"><B>cgi_remote_ident</B></A>] is the value of REMOTE_IDENT

   [<A NAME="cgi_auth_type"><B>cgi_auth_type</B></A>] is the value of AUTH_TYPE

   [<A NAME="cgi_content_type"><B>cgi_content_type</B></A>] is the value of CONTENT_TYPE

   [<A NAME="cgi_content_length"><B>cgi_content_length</B></A>] is the value of CONTENT_LENGTH, that is, the
   length of the data transmitted in the CGI call.

   [<A NAME="cgi_annotation_server"><B>cgi_annotation_server</B></A>] is the value of ANNOTATION_SERVER

   [<A NAME="cgi_http_cookie"><B>cgi_http_cookie</B></A>] is the value of HTTP_COOKIE

   [<A NAME="cgi_http_forwarded"><B>cgi_http_forwarded</B></A>] is the value of HTTP_FORWARDED

   [<A NAME="cgi_http_host"><B>cgi_http_host</B></A>] is the value of HTTP_HOST

   [<A NAME="cgi_http_proxy_connection"><B>cgi_http_proxy_connection</B></A>] is the value of HTTP_PROXY_CONNECTION

   [<A NAME="cgi_script_filename"><B>cgi_script_filename</B></A>] is the value of SCRIPT_FILENAME

   [<A NAME="cgi_document_root"><B>cgi_document_root</B></A>] is the value of DOCUMENT_ROOT

   [<A NAME="cgi_server_admin"><B>cgi_server_admin</B></A>] is the value of SERVER_ADMIN

   [<A NAME="cgi_api_version"><B>cgi_api_version</B></A>] is the value of API_VERSION

   [<A NAME="cgi_the_request"><B>cgi_the_request</B></A>] is the value of THE_REQUEST

   [<A NAME="cgi_request_uri"><B>cgi_request_uri</B></A>] is the value of REQUEST_URI

   [<A NAME="cgi_request_filename"><B>cgi_request_filename</B></A>] is the value of REQUEST_FILENAME

   [<A NAME="cgi_is_subreq"><B>cgi_is_subreq</B></A>] is the value of IS_SUBREQ
*)

</PRE><HR><TABLE WIDTH=100%><TR ALIGN = CENTER>
<TH><A HREF="idIndex.html">Identifier index</A>
<TH><A HREF="index.html">Structure index</A>
</TABLE><HR>
<BR><EM>Moscow ML 1.44</EM></BODY></HTML>
