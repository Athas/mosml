<HTML><HEAD><TITLE>Structure Gdimage</TITLE></HEAD>
<BODY BGCOLOR="#fbf2e7">
<H1>Structure Gdimage</H1>
<HR><TABLE WIDTH=100%><TR ALIGN = CENTER>
<TH><A HREF="idIndex.html">Identifier index</A>
<TH><A HREF="index.html">Structure index</A>
</TABLE><HR>
<PRE>
<A NAME="line1"></A>(* Gdimage -- Moscow ML interface to Thomas Boutell's gd image package *)
<A NAME="line2"></A>(* This module requires Dynlib and the gd package to be installed      *)
<A NAME="line3"></A>
<A NAME="line4"></A>type image
<A NAME="line5"></A>
<A NAME="line6"></A>type color
<A NAME="line7"></A>
<A NAME="line8"></A>datatype style = 
<A NAME="line9"></A>    ColorS of color
<A NAME="line10"></A>  | TransparentS
<A NAME="line11"></A>
<A NAME="line12"></A>datatype mode = 
<A NAME="line13"></A>    Color of color
<A NAME="line14"></A>  | Transparent
<A NAME="line15"></A>  | Brushed of image
<A NAME="line16"></A>  | Styled of style vector
<A NAME="line17"></A>  | StyledBrushed of bool vector * image
<A NAME="line18"></A>  | Tiled of image
<A NAME="line19"></A>
<A NAME="line20"></A>datatype font = 
<A NAME="line21"></A>    Tiny 
<A NAME="line22"></A>  | Small
<A NAME="line23"></A>  | MediumBold
<A NAME="line24"></A>  | Large 
<A NAME="line25"></A>  | Giant
<A NAME="line26"></A>
<A NAME="line27"></A>type rgb = int * int * int           (* RGB color components, 0..255   *)
<A NAME="line28"></A>type xy  = int * int                 (* points (x, y) and sizes (w, h) *)
<A NAME="line29"></A>
<A NAME="line30"></A>val <A NAME="line30"></A><A HREF="#image">image</A>     : xy -> rgb -> image
<A NAME="line31"></A>val <A NAME="line31"></A><A HREF="#fromGif">fromGif</A>   : string -> image
<A NAME="line32"></A>val <A NAME="line32"></A><A HREF="#toGif">toGif</A>     : image -> string -> unit
<A NAME="line33"></A>val <A NAME="line33"></A><A HREF="#stdoutGif">stdoutGif</A> : image -> unit 
<A NAME="line34"></A>val <A NAME="line34"></A><A HREF="#size">size</A>      : image -> xy
<A NAME="line35"></A>
<A NAME="line36"></A>val <A NAME="line36"></A><A HREF="#color">color</A>          : image -> rgb -> color
<A NAME="line37"></A>val <A NAME="line37"></A><A HREF="#rgb">rgb</A>            : image -> color -> rgb
<A NAME="line38"></A>val <A NAME="line38"></A><A HREF="#htmlcolors">htmlcolors</A>     : image -> { aqua : color, black : color, blue : color,
<A NAME="line39"></A>                                fuchsia : color, gray : color, 
<A NAME="line40"></A>                                green : color, lime : color, maroon : color,
<A NAME="line41"></A>                                navy : color, olive : color, purple : color,
<A NAME="line42"></A>                                red : color, silver : color, teal : color,
<A NAME="line43"></A>                                white : color, yellow : color }
<A NAME="line44"></A>val <A NAME="line44"></A><A HREF="#getTransparent">getTransparent</A> : image -> color option 
<A NAME="line45"></A>val <A NAME="line45"></A><A HREF="#setTransparent">setTransparent</A> : image -> color -> unit
<A NAME="line46"></A>val <A NAME="line46"></A><A HREF="#noTransparent">noTransparent</A>  : image -> unit 
<A NAME="line47"></A>
<A NAME="line48"></A>val <A NAME="line48"></A><A HREF="#drawPixel">drawPixel</A>   : image -> mode -> xy -> unit
<A NAME="line49"></A>val <A NAME="line49"></A><A HREF="#drawLine">drawLine</A>    : image -> mode -> xy * xy -> unit
<A NAME="line50"></A>val <A NAME="line50"></A><A HREF="#drawRect">drawRect</A>    : image -> mode -> xy * xy -> unit
<A NAME="line51"></A>val <A NAME="line51"></A><A HREF="#fillRect">fillRect</A>    : image -> mode -> xy * xy -> unit
<A NAME="line52"></A>val <A NAME="line52"></A><A HREF="#drawPolygon">drawPolygon</A> : image -> mode -> xy vector -> unit
<A NAME="line53"></A>val <A NAME="line53"></A><A HREF="#fillPolygon">fillPolygon</A> : image -> mode -> xy vector -> unit
<A NAME="line54"></A>val <A NAME="line54"></A><A HREF="#drawArc">drawArc</A>     : image -> mode -> { c : xy, wh : xy, from : int, to : int }
<A NAME="line55"></A>                  -> unit
<A NAME="line56"></A>val <A NAME="line56"></A><A HREF="#fill">fill</A>        : image -> mode -> xy -> unit
<A NAME="line57"></A>val <A NAME="line57"></A><A HREF="#fillBorder">fillBorder</A>  : image -> mode -> xy -> color -> unit
<A NAME="line58"></A> 
<A NAME="line59"></A>val <A NAME="line59"></A><A HREF="#copy">copy</A>        : { src : image, srcxy : xy, srcwh : xy,
<A NAME="line60"></A>                    dst : image, dstxy : xy } -> unit
<A NAME="line61"></A>val <A NAME="line61"></A><A HREF="#copyResize">copyResize</A>  : { src : image, srcxy : xy, srcwh : xy,
<A NAME="line62"></A>                    dst : image, dstxy : xy, dstwh : xy } -> unit
<A NAME="line63"></A>
<A NAME="line64"></A>val <A NAME="line64"></A><A HREF="#char">char</A>        : image -> color -> font -> xy -> char -> unit
<A NAME="line65"></A>val <A NAME="line65"></A><A HREF="#charUp">charUp</A>      : image -> color -> font -> xy -> char -> unit
<A NAME="line66"></A>val <A NAME="line66"></A><A HREF="#string">string</A>      : image -> color -> font -> xy -> string -> unit
<A NAME="line67"></A>val <A NAME="line67"></A><A HREF="#stringUp">stringUp</A>    : image -> color -> font -> xy -> string -> unit
<A NAME="line68"></A>val <A NAME="line68"></A><A HREF="#charsize">charsize</A>    : font -> xy
<A NAME="line69"></A>
<A NAME="line70"></A>(* Type image is the abstract type of images being drawn.  They can be
<A NAME="line71"></A>   created from scratch, imported from GIF files, and exported to GIF
<A NAME="line72"></A>   files.
<A NAME="line73"></A>
<A NAME="line74"></A>   All functions correctly clip to the actual size of the image.
<A NAME="line75"></A>   
<A NAME="line76"></A>   Type color is the abstract type of colors.  There are at most 256
<A NAME="line77"></A>   different colors in a GIF image.
<A NAME="line78"></A>
<A NAME="line79"></A>   Type style is the type of drawing styles.  A style is either a
<A NAME="line80"></A>   color, or transparent.
<A NAME="line81"></A>
<A NAME="line82"></A>   Type mode is the drawing more for line drawing and filling.  It may 
<A NAME="line83"></A>   be 
<A NAME="line84"></A>        Color c         where c is a color
<A NAME="line85"></A>        Transparent
<A NAME="line86"></A>        Brushed img     for line drawing using the given image as brush
<A NAME="line87"></A>        Styled stys     for line drawing, cyclically using the styles 
<A NAME="line88"></A>                        in the given vector to create a dashed line
<A NAME="line89"></A>        StyledBrushed (vis, img) 
<A NAME="line90"></A>                        for line drawing, using the given image as a brush,
<A NAME="line91"></A>                        cyclically switching it on and off according to the 
<A NAME="line92"></A>                        given bool vector
<A NAME="line93"></A>        Tiled img       for filling, using the given image as a tile
<A NAME="line94"></A>
<A NAME="line95"></A>   Type font is the type of fonts: Tiny, Small, MediumBold, Large,
<A NAME="line96"></A>   Giant
<A NAME="line97"></A>
<A NAME="line98"></A>   Type rgb is the type of (r, g, b) triples, where the components
<A NAME="line99"></A>   indicate color intensity as an integer value in the range 0..255.
<A NAME="line100"></A>
<A NAME="line101"></A>   Type xy is the type of pairs, used for (x, y) coordinates or to
<A NAME="line102"></A>   indicate dimensions (width, height).  The origin (0, 0) is the
<A NAME="line103"></A>   upper left-hand corner of the image.  The x coordinates increase to
<A NAME="line104"></A>   the right; the y coordinates increase downwards.
<A NAME="line105"></A>
   [<A NAME="image"><B>image</B></A> (w, h) rgb] creates a new empty image with size (w, h) and
   the background color rgb.  Raises Fail if the image cannot be
   created.

   [<A NAME="fromGif"><B>fromGif</B></A> filename] reads an image from the given GIF file.  Raises
   Fail if the file does not exist or does not contain a GIF image.

   [<A NAME="size"><B>size</B></A> img] returns (w, h) where w is the width and h the height of
   img.

   [<A NAME="toGif"><B>toGif</B></A> img filename] write the image to the given file in GIF
   format.

   [<A NAME="stdoutGif"><B>stdoutGif</B></A> img] writes the image to standard output in GIF format,
   preceded by the HTTP header "Content-type: image/gif\n\n".  Useful
   in CGI scripts.

   [<A NAME="color"><B>color</B></A> img rgb] returns the color code corresponding to rgb in the
   color table of img.  Reuses the color code if it has already been
   allocated; otherwise allocates the color if possible; otherwise
   returns an approximation to the color rgb.

   [<A NAME="htmlcolors"><B>htmlcolors</B></A> im] returns a record containing the 16 standard HTML
   colors: aqua, black, blue, fuchsia, gray, green, lime, maroon,
   navy, olive, purple, red, silver, teal, white, yellow.  This call
   will allocate all these colors in the color table of the image,
   even if you do not use all of them.

   [<A NAME="rgb"><B>rgb</B></A> img color] returns (r, g, b) where r, g, b are the component
   intensities of the given color in the color table of img.

   [<A NAME="getTransparent"><B>getTransparent</B></A> img] returns SOME c where c is the `transparent'
   color of the image, if any; otherwise returns NONE.

   [<A NAME="setTransparent"><B>setTransparent</B></A> img col] makes the given color transparent in the
   image.

   [<A NAME="noTransparent"><B>noTransparent</B></A> img] makes all colors non-transparent in the image.
   This is useful for images that are to be used as tiles for filling.
   Such images are not allowed to have a transparent color.

   [<A NAME="drawPixel"><B>drawPixel</B></A> img mode xy] draws the pixel in img at xy using the
   given mode.

   [<A NAME="drawLine"><B>drawLine</B></A> img mode (xy1, xy2)] draws a line in img from xy1 to xy2
   using the given mode.

   [<A NAME="drawRect"><B>drawRect</B></A> img mode (xy1, xy2)] draws a rectangle in img with
   opposing corners xy1 and xy2 using the given mode.

   [<A NAME="fillRect"><B>fillRect</B></A> img mode (xy1, xy2)] draws a filled rectangle in img with
   opposing corners xy1 and xy2 using the given mode.

   [<A NAME="drawPolygon"><B>drawPolygon</B></A> img mode xys] draws a polygon in img with corners as
   given by the vector xys of coordinates using the given mode.

   [<A NAME="fillPolygon"><B>fillPolygon</B></A> img mode xys] draws a filled polygon in img with
   corners as given by the vector xys of coordinates using the given
   mode.

   [<A NAME="drawArc"><B>drawArc</B></A> img mode { c, wh, from, to }] draw part of an ellipsis arc
   in img, with center c, width and height wh, using the given `from'
   and `to' angles, given in degrees (0..360).

   [<A NAME="fill"><B>fill</B></A> img mode xy] fills the region in img around xy which has the
   same color as the point at img, using the given mode.

   [<A NAME="fillBorder"><B>fillBorder</B></A> img mode xy col] fills the region in img around xy
   which is delimited by the color col, using the given mode.
 
   [<A NAME="copy"><B>copy</B></A> { src, srcxy, srcwh, dst, dstxy }] copies part of the image
   src into the image dst, without rescaling.  More precisely, copies
   the subimage of src whose upper left-hand corner is srcxy and whose
   size is srcwh, into the subimage of dst whose upper left-hand
   corner is dstxy.  The images src and dst may be the same, but if
   the subimages overlap, then the result is unpredictable.  

   [<A NAME="copyResize"><B>copyResize</B></A> { src, srcxy, srcwh, dst, dstxy, dstwh }] copies part
   of the image src into the image dst, rescaling to the given size
   dstwh of the destination subimage.  Otherwise works as copy.

   [<A NAME="char"><B>char</B></A> img col font xy ch] draws the character ch left-right (to be
   read from south) in img at xy using the given color.

   [<A NAME="charUp"><B>charUp</B></A> img col font xy ch] draws the character ch bottom-up (to be
   read from east) in img at xy using the given color.

   [<A NAME="string"><B>string</B></A> img col font xy s] draws the string s left-right (to be
   read from south) in img at xy using the given color.

   [<A NAME="stringUp"><B>stringUp</B></A> img col font xy s] draws the string s bottom-up (to be
   read from east) in img at xy using the given color.

   [<A NAME="charsize"><B>charsize</B></A> font] returns (w, h) where w is the width and h the
   height, in pixels, of each character in the given font.
*)

</PRE><HR><TABLE WIDTH=100%><TR ALIGN = CENTER>
<TH><A HREF="idIndex.html">Identifier index</A>
<TH><A HREF="index.html">Structure index</A>
</TABLE><HR>
<BR><EM>Moscow ML 1.44</EM></BODY></HTML>
